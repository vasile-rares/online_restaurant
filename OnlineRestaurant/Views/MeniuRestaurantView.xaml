<UserControl 
    x:Class="OnlineRestaurant.Views.MeniuRestaurantView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:local="clr-namespace:OnlineRestaurant.Views"
    xmlns:vm="clr-namespace:OnlineRestaurant.ViewModels"
    xmlns:converters="clr-namespace:OnlineRestaurant.Converters"
    mc:Ignorable="d" 
    d:DesignHeight="600" d:DesignWidth="800">
    
    <UserControl.Resources>
        <converters:DefaultImageConverter x:Key="DefaultImageConverter" DefaultImagePath="/Images/Preparate/piept-de-pui.jpg" />
        
        <Style x:Key="TitluCategorie" TargetType="TextBlock">
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,15,0,5"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
        </Style>
        
        <Style x:Key="TitluItem" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,5,0,2"/>
            <Setter Property="Foreground" Value="#34495E"/>
        </Style>
        
        <Style x:Key="DetaliiItem" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,2,0,2"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="Foreground" Value="#7F8C8D"/>
        </Style>
        
        <Style x:Key="PretItem" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,2,0,2"/>
            <Setter Property="Foreground" Value="#16A085"/>
        </Style>
        
        <Style x:Key="IndisponibilItem" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="10,2,0,2"/>
            <Setter Property="Foreground" Value="#E74C3C"/>
        </Style>
        
        <DataTemplate x:Key="ItemMeniuTemplate">
            <Border Margin="5" Padding="10" Background="#FAFAFA" CornerRadius="5" 
                    BorderBrush="#DDDDDD" BorderThickness="1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Imagine preparat/meniu -->
                    <Border Width="100" Height="100" BorderBrush="#DDDDDD" BorderThickness="1" 
                            CornerRadius="5" Margin="0,0,10,0" ClipToBounds="True">
                        <Image Source="{Binding Imagini, Converter={StaticResource DefaultImageConverter}}" Stretch="UniformToFill"/>
                    </Border>
                    
                    <!-- Informații despre preparat/meniu -->
                    <StackPanel Grid.Column="1">
                        <TextBlock Text="{Binding Denumire}" Style="{StaticResource TitluItem}"/>
                        <TextBlock Text="{Binding DetaliiContinut}" Style="{StaticResource DetaliiItem}"/>
                        <TextBlock Text="{Binding CantitatePortie, StringFormat='{}{0} g'}" Style="{StaticResource DetaliiItem}"/>
                        <TextBlock Text="{Binding AfisorAlergeni}" Style="{StaticResource DetaliiItem}"/>
                    </StackPanel>
                    
                    <!-- Preț și disponibilitate -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Top">
                        <TextBlock Text="{Binding Pret, StringFormat='{}{0:C}'}" Style="{StaticResource PretItem}"/>
                        <TextBlock Text="{Binding StatusDisponibilitate}" Style="{StaticResource IndisponibilItem}"/>
                    </StackPanel>
                </Grid>
            </Border>
        </DataTemplate>
        
        <DataTemplate x:Key="CategorieTemplate">
            <StackPanel>
                <TextBlock Text="{Binding Nume}" Style="{StaticResource TitluCategorie}"/>
                <ItemsControl ItemsSource="{Binding Items}" ItemTemplate="{StaticResource ItemMeniuTemplate}" 
                              Margin="0,0,0,20"/>
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Secțiunea de căutare -->
        <Border Grid.Row="0" Background="#ECF0F1" Padding="15" BorderBrush="#BDC3C7" 
                BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel>
                    <TextBlock Text="Căutare în meniu" FontSize="18" FontWeight="Bold" 
                               Margin="0,0,0,10" Foreground="#2C3E50"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox Text="{Binding CautareCuvantCheie, UpdateSourceTrigger=PropertyChanged}" 
                                 Padding="5" FontSize="14"/>
                        <Button Grid.Column="1" Content="Resetare" Command="{Binding ResetareCautareCommand}"
                                Padding="10,5" Margin="5,0,0,0" Background="#3498DB" Foreground="White"/>
                    </Grid>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                        <CheckBox Content="Nu conține" IsChecked="{Binding CautareContrariu}" 
                                  Margin="0,0,15,0" VerticalAlignment="Center"/>
                        <CheckBox Content="Caută după alergeni" IsChecked="{Binding CautareDupaAlergen}" 
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
                
                <TextBlock Grid.Column="1" Margin="15,0,0,0" VerticalAlignment="Center" 
                           Text="Exemplu: pentru a căuta preparate fără gluten, activați opțiunea 'Nu conține' și introduceți 'gluten'"
                           Width="200" TextWrapping="Wrap" Foreground="#7F8C8D" FontStyle="Italic"/>
            </Grid>
        </Border>
        
        <!-- Lista de categorii cu preparate și meniuri -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="15">
            <ItemsControl ItemsSource="{Binding Categorii}" ItemTemplate="{StaticResource CategorieTemplate}"/>
        </ScrollViewer>
    </Grid>
</UserControl> 